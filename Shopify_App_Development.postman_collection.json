{
  "info": {
    "name": "Sendly Marketing - Shopify App Development",
    "description": "Complete API collection for Shopify App development with store-specific authentication and testing scenarios.",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url_dev",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "base_url_prod",
      "value": "https://sendly-marketing-backend.onrender.com",
      "type": "string"
    },
    {
      "key": "shopDomain",
      "value": "your-store.myshopify.com",
      "type": "string"
    },
    {
      "key": "contactId",
      "value": "cnt_01HRTD...",
      "type": "string"
    },
    {
      "key": "campaignId",
      "value": "cmp_01HRTD...",
      "type": "string"
    },
    {
      "key": "automationId",
      "value": "auto_01HRTD...",
      "type": "string"
    },
    {
      "key": "templateId",
      "value": "tpl_01HRTD...",
      "type": "string"
    },
    {
      "key": "messageId",
      "value": "msg_01HRTD...",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üè• Health & System",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/health",
              "host": ["{{base_url_dev}}"],
              "path": ["health"]
            }
          },
          "response": [
            {
              "name": "Health Check Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-Shopify-Shop-Domain",
                    "value": "{{shopDomain}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url_dev}}/health",
                  "host": ["{{base_url_dev}}"],
                  "path": ["health"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"ok\": true,\n  \"t\": 1704067200000\n}"
            }
          ]
        },
        {
          "name": "Full Health Check",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/health/full",
              "host": ["{{base_url_dev}}"],
              "path": ["health", "full"]
            }
          }
        },
        {
          "name": "System Metrics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/metrics",
              "host": ["{{base_url_dev}}"],
              "path": ["metrics"]
            }
          }
        }
      ]
    },
    {
      "name": "üìä Dashboard",
      "item": [
        {
          "name": "Dashboard Overview",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/dashboard/overview",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "dashboard", "overview"]
            }
          },
          "response": [
            {
              "name": "Dashboard Overview Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-Shopify-Shop-Domain",
                    "value": "{{shopDomain}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url_dev}}/api/dashboard/overview",
                  "host": ["{{base_url_dev}}"],
                  "path": ["api", "dashboard", "overview"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"totalContacts\": 1250,\n    \"totalCampaigns\": 45,\n    \"totalAutomations\": 4,\n    \"creditsRemaining\": 8500,\n    \"messagesSent\": 3200,\n    \"deliveryRate\": 96.5,\n    \"recentActivity\": [\n      {\n        \"type\": \"campaign\",\n        \"message\": \"Back to School campaign sent to 500 contacts\",\n        \"timestamp\": \"2024-01-15T10:30:00Z\"\n      }\n    ]\n  }\n}"
            }
          ]
        },
        {
          "name": "Quick Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/dashboard/quick-stats",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "dashboard", "quick-stats"]
            }
          }
        }
      ]
    },
    {
      "name": "üë• Contacts Management",
      "item": [
        {
          "name": "List Contacts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/contacts?page=1&pageSize=20&filter=all&q=&sortBy=createdAt&sortOrder=desc",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "contacts"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "pageSize",
                  "value": "20"
                },
                {
                  "key": "filter",
                  "value": "all",
                  "description": "all, male, female, consented, nonconsented"
                },
                {
                  "key": "q",
                  "value": "",
                  "description": "Search term"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            }
          }
        },
        {
          "name": "Get Contact by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/contacts/{{contactId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "contacts", "{{contactId}}"]
            }
          }
        },
        {
          "name": "Create Contact",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"phone\": \"+306977123456\",\n  \"email\": \"john@example.com\",\n  \"gender\": \"male\",\n  \"birthDate\": \"1985-03-15T00:00:00Z\",\n  \"smsConsent\": true\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/contacts",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "contacts"]
            }
          }
        },
        {
          "name": "Update Contact",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"John Updated\",\n  \"lastName\": \"Doe\",\n  \"email\": \"john.updated@example.com\",\n  \"gender\": \"male\",\n  \"birthDate\": \"1985-03-15T00:00:00Z\",\n  \"smsConsent\": true\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/contacts/{{contactId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "contacts", "{{contactId}}"]
            }
          }
        },
        {
          "name": "Delete Contact",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/contacts/{{contactId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "contacts", "{{contactId}}"]
            }
          }
        },
        {
          "name": "Contact Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/contacts/stats",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "contacts", "stats"]
            }
          }
        },
        {
          "name": "Birthday Contacts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/contacts/birthdays",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "contacts", "birthdays"]
            }
          }
        }
      ]
    },
    {
      "name": "üì¢ Campaigns Management",
      "item": [
        {
          "name": "List Campaigns",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns?page=1&pageSize=20&status=all",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "pageSize",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "all",
                  "description": "all, draft, scheduled, sending, sent, failed"
                }
              ]
            }
          }
        },
        {
          "name": "Get Campaign by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns/{{campaignId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns", "{{campaignId}}"]
            }
          }
        },
        {
          "name": "Create Campaign",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Back to School Campaign\",\n  \"message\": \"Get 20% off on all school supplies! Use code SCHOOL20. Valid until end of month.\",\n  \"audienceId\": \"aud_all_consented\",\n  \"discountId\": \"disc_123\",\n  \"scheduleType\": \"immediate\"\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns"]
            }
          }
        },
        {
          "name": "Update Campaign",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Back to School Campaign\",\n  \"message\": \"Get 25% off on all school supplies! Use code SCHOOL25. Valid until end of month.\"\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns/{{campaignId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns", "{{campaignId}}"]
            }
          }
        },
        {
          "name": "Delete Campaign",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns/{{campaignId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns", "{{campaignId}}"]
            }
          }
        },
        {
          "name": "Prepare Campaign",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns/{{campaignId}}/prepare",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns", "{{campaignId}}", "prepare"]
            }
          }
        },
        {
          "name": "Send Campaign Now",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns/{{campaignId}}/send",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns", "{{campaignId}}", "send"]
            }
          }
        },
        {
          "name": "Schedule Campaign",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"scheduleType\": \"scheduled\",\n  \"scheduleAt\": \"2024-02-01T10:00:00Z\"\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns/{{campaignId}}/schedule",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns", "{{campaignId}}", "schedule"]
            }
          }
        },
        {
          "name": "Campaign Metrics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/campaigns/{{campaignId}}/metrics",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "campaigns", "{{campaignId}}", "metrics"]
            }
          }
        }
      ]
    },
    {
      "name": "ü§ñ Automations",
      "item": [
        {
          "name": "Get User Automations",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/automations",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "automations"]
            }
          }
        },
        {
          "name": "Update User Automation",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userMessage\": \"Your cart is waiting! Complete your purchase before items run out. Use code CART10 for 10% off!\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/automations/{{automationId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "automations", "{{automationId}}"]
            }
          }
        },
        {
          "name": "Get Automation Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/automations/stats",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "automations", "stats"]
            }
          }
        }
      ]
    },
    {
      "name": "üìù Templates",
      "item": [
        {
          "name": "Get All Templates",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/templates?category=all&page=1&pageSize=20",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "templates"],
              "query": [
                {
                  "key": "category",
                  "value": "all",
                  "description": "all, promotional, abandoned_cart, holiday_offers, customer_service"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "pageSize",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Get Template by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/templates/{{templateId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "templates", "{{templateId}}"]
            }
          }
        },
        {
          "name": "Get Template Categories",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/templates/categories",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "templates", "categories"]
            }
          }
        },
        {
          "name": "Track Template Usage",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/templates/{{templateId}}/track",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "templates", "{{templateId}}", "track"]
            }
          }
        }
      ]
    },
    {
      "name": "üìà Reports",
      "item": [
        {
          "name": "Reports Overview",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/reports/overview",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "reports", "overview"]
            }
          }
        },
        {
          "name": "KPIs Dashboard",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/reports/kpis",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "reports", "kpis"]
            }
          }
        },
        {
          "name": "Campaign Performance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/reports/campaigns?from=2024-01-01&to=2024-01-31&type=all",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "reports", "campaigns"],
              "query": [
                {
                  "key": "from",
                  "value": "2024-01-01",
                  "description": "Start date (YYYY-MM-DD)"
                },
                {
                  "key": "to",
                  "value": "2024-01-31",
                  "description": "End date (YYYY-MM-DD)"
                },
                {
                  "key": "type",
                  "value": "all",
                  "description": "all, manual, automation"
                }
              ]
            }
          }
        },
        {
          "name": "Automation Insights",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/reports/automations?from=2024-01-01&to=2024-01-31",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "reports", "automations"],
              "query": [
                {
                  "key": "from",
                  "value": "2024-01-01"
                },
                {
                  "key": "to",
                  "value": "2024-01-31"
                }
              ]
            }
          }
        },
        {
          "name": "Credit Usage Report",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/reports/credits?from=2024-01-01&to=2024-01-31",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "reports", "credits"],
              "query": [
                {
                  "key": "from",
                  "value": "2024-01-01"
                },
                {
                  "key": "to",
                  "value": "2024-01-31"
                }
              ]
            }
          }
        },
        {
          "name": "Contact Insights",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/reports/contacts",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "reports", "contacts"]
            }
          }
        }
      ]
    },
    {
      "name": "üí∞ Settings & Billing",
      "item": [
        {
          "name": "Get Settings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/settings",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "settings"]
            }
          }
        },
        {
          "name": "Get Account Info",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/settings/account",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "settings", "account"]
            }
          }
        },
        {
          "name": "Update Sender Number",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"senderNumber\": \"+306977123456\"\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/settings/sender",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "settings", "sender"]
            }
          }
        },
        {
          "name": "Get Credit Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/billing/balance",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "billing", "balance"]
            }
          }
        },
        {
          "name": "Get Credit Packages",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/billing/packages",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "billing", "packages"]
            }
          }
        },
        {
          "name": "Get Billing History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/billing/history?page=1&pageSize=20",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "billing", "history"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "pageSize",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Create Purchase Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"packageType\": \"1000_sms\",\n  \"successUrl\": \"https://your-app.com/success\",\n  \"cancelUrl\": \"https://your-app.com/cancel\"\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/billing/purchase",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "billing", "purchase"]
            }
          }
        }
      ]
    },
    {
      "name": "üõçÔ∏è Shopify Integration",
      "item": [
        {
          "name": "Get Shopify Discounts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/shopify/discounts",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "shopify", "discounts"]
            }
          }
        },
        {
          "name": "Get Shopify Discount by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/shopify/discounts/disc_123",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "shopify", "discounts", "disc_123"]
            }
          }
        },
        {
          "name": "Validate Discount Code",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"discountId\": \"disc_123\"\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/shopify/discounts/validate",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "shopify", "discounts", "validate"]
            }
          }
        }
      ]
    },
    {
      "name": "üìä Tracking",
      "item": [
        {
          "name": "Get Mitto Message Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/tracking/mitto/{{messageId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "tracking", "mitto", "{{messageId}}"]
            }
          }
        },
        {
          "name": "Get Campaign Delivery Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              }
            ],
            "url": {
              "raw": "{{base_url_dev}}/api/tracking/campaign/{{campaignId}}",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "tracking", "campaign", "{{campaignId}}"]
            }
          }
        },
        {
          "name": "Bulk Update Delivery Status",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Shopify-Shop-Domain",
                "value": "{{shopDomain}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"updates\": [\n    {\n      \"messageId\": \"msg_123\",\n      \"status\": \"Delivered\",\n      \"deliveredAt\": \"2024-01-15T10:35:00Z\"\n    },\n    {\n      \"messageId\": \"msg_124\",\n      \"status\": \"Failed\",\n      \"failedAt\": \"2024-01-15T10:35:00Z\",\n      \"failureReason\": \"Invalid phone number\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url_dev}}/api/tracking/bulk-update",
              "host": ["{{base_url_dev}}"],
              "path": ["api", "tracking", "bulk-update"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-generate UUIDs for testing",
          "if (!pm.variables.get('contactId') || pm.variables.get('contactId') === 'cnt_01HRTD...') {",
          "    pm.variables.set('contactId', 'cnt_' + pm.variables.replaceIn('{{$randomUUID}}').substring(0, 8));",
          "}",
          "",
          "if (!pm.variables.get('campaignId') || pm.variables.get('campaignId') === 'cmp_01HRTD...') {",
          "    pm.variables.set('campaignId', 'cmp_' + pm.variables.replaceIn('{{$randomUUID}}').substring(0, 8));",
          "}",
          "",
          "if (!pm.variables.get('automationId') || pm.variables.get('automationId') === 'auto_01HRTD...') {",
          "    pm.variables.set('automationId', 'auto_' + pm.variables.replaceIn('{{$randomUUID}}').substring(0, 8));",
          "}",
          "",
          "if (!pm.variables.get('templateId') || pm.variables.get('templateId') === 'tpl_01HRTD...') {",
          "    pm.variables.set('templateId', 'tpl_' + pm.variables.replaceIn('{{$randomUUID}}').substring(0, 8));",
          "}",
          "",
          "if (!pm.variables.get('messageId') || pm.variables.get('messageId') === 'msg_01HRTD...') {",
          "    pm.variables.set('messageId', 'msg_' + pm.variables.replaceIn('{{$randomUUID}}').substring(0, 8));",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test for all requests",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has valid JSON', function () {",
          "    if (pm.response.headers.get('Content-Type') && pm.response.headers.get('Content-Type').includes('application/json')) {",
          "        pm.response.to.have.jsonBody();",
          "    }",
          "});",
          "",
          "// Store scoping validation",
          "if (pm.response.json() && pm.response.json().data && Array.isArray(pm.response.json().data)) {",
          "    pm.test('All data belongs to current store', function () {",
          "        const data = pm.response.json().data;",
          "        const currentShopDomain = pm.variables.get('shopDomain');",
          "        ",
          "        data.forEach(item => {",
          "            if (item.shopDomain) {",
          "                pm.expect(item.shopDomain).to.eql(currentShopDomain);",
          "            }",
          "        });",
          "    });",
          "}",
          "",
          "// Shopify App specific tests",
          "pm.test('Shopify App authentication working', function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
          "});"
        ]
      }
    }
  ]
}
